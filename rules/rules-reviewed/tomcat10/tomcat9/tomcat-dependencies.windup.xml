<?xml version="1.0"?>
<ruleset xmlns="http://windup.jboss.org/schema/jboss-ruleset" id="upgrade-tomcat-dependencies"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://windup.jboss.org/schema/jboss-ruleset http://windup.jboss.org/schema/jboss-ruleset/windup-jboss-ruleset.xsd">
    <metadata>
        <description>
            This ruleset provides analysis of applications that need to change their pom dependencies to upgrade dependencies that belong to the groupId `org.apache.tomcat`
        </description>
        <dependencies>
            <addon id="org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final" />
            <addon id="org.jboss.windup.rules,windup-rules-java,3.0.0.Final" />
        </dependencies>
        <targetTechnology id="tomcat" versionRange="[9,11)" />
    </metadata>
    <rules>
        <rule id="upgrade-tomcat-dependencies-00001">
            <when>
                <project>
                    <artifact groupId="org.apache.tomcat" artifactId="tomcat-{artifact-name}" fromVersion="9.0.0"/>
                </project>
            </when>
            <perform>
                <hint title="Artifact tomcat-{artifact-name} version should be upgraded" effort="1" category-id="mandatory">
                    <message>Upgrade the artifact tomcat-{artifact-name} from 9.x.x to 10.x.x for it to match the version of Tomcat where you are deploying your application</message>
                </hint>
            </perform>
            <where param="artifact-name">
                <matches pattern="(annotations-api|api|catalina|catalina-ant|catalina-ha|catalina-jmx-remote|catalina-ws|coyote|dbcp|el-api|i18n-cs|i18n-de|i18n-es|i18n-fr|i18n-ja|i18n-ko|i18n-pt-BR|i18n-ru|i18n-zh-CN|jasper|jasper-el|jaspic-api|jdbc|jni|jsp-api|juli|parent|servlet-api|spdy|ssi|store-config|tribes|util|util-scan|vault|websocket|websocket-api)"/>
            </where>
        </rule>
    </rules>
</ruleset>
